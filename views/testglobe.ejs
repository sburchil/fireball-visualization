<%- include('partials/header.ejs') %>
  <script src="//unpkg.com/globe.gl"></script>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16">
      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
    </symbol>
    <symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16">
      <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
    </symbol>
  </svg>
  <div class="wrapper">
    <div class="content">
        <div id="alerts">
            <div class="alert alert-danger alert-dismissable fade show" role="alert" id="alert-danger">
                <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"/></svg>
                <label id="danger-message"></label>
                <button type="button" class="btn-close" onclick="$('.alert-danger').hide()"></button>
            </div>
            <div class="alert alert-success alert-dismissable fade show" role="alert" id="alert-success">
                <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:"><use xlink:href="#exclamation-triangle-fill"/></svg>
                <label id="success-message"></label>
                <button type="button" class="btn-close" onclick="$('.alert-success').hide()"></button>
            </div>
        </div>
      <div class="modal fade" tabindex="-1" role="dialog" id="menuModal">
        <div class="modal-dialog modal-dialog-scrollable" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Options</h5>
            </div>
            <form action="" method="GET" id="paramForm">
              <div class="modal-body">
                <div class="form-group">
                  <label for="date-min">Start Date</label>
                  <input type="date" class="form-control" id="date-min" name="date-min" min="1988-04-15" max="2022-09-15" value="" />
                  <label for="date-max">End Date</label>
                  <input type="date" class="form-control" id="date-max" name="date-max" min="1988-04-15" max="2022-09-15" value="" />
                  <hr class="hr" />
                </div>
                <div class="form-group">
                    <label><strong><b>Energy</b></strong></label> - <i><small>Positive value in joules x 10^10 (e.g., <u>'4'</u> = 4 x 10^10)</small></i><br>
                  <label for="energy-min">Min Energy</label>
                  <input type="number" class="form-control" id="energy-min" name="energy-min" min="2" max="37500" value=""/>
                  <label for="energy-max">Max Energy</label>
                  <input type="number" class="form-control" id="energy-max" name="energy-max" min="2" max="37500" value=""/>
                  <hr class="hr" />
                </div>
                <div class="form-group">
                    <label><strong><b>Impact Energy</b></strong></label> - <i><small>Estimated impact energy in positive values of kilotons (kt) (e.g., <u>0.08</u> kt)</small></i><br>
                  <label for="impact-e-min">Min Impact Energy</label>
                  <input type="number" class="form-control" id="impact-e-min" name="impact-e-min" min="0" max="440" value=""/>
                  <label for="impact-e-max">Max Impact Energy</label>
                  <input type="number" class="form-control" id="impact-e-max" name="impact-e-max" min="0" max="440" value=""/>
                  <hr class="hr" />
                </div>
                <div class="form-group">
                  <label for="limit">Limit</label> - <i><small>Number of results to return (e.g., <u>100</u>)</small></i><br>
                  <input type="number" class="form-control" id="limit" name="limit" min="1" max="993" value=""/>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="reset">
                  Reset Data Points
                </button>
                <button type="button" class="btn btn-primary" id="clear">
                  Clear Inputs
              </div>
            </form>
          </div>
        </div>
      </div>
      <!-- <nav class="navbar navbar-expand-lg" id="sidebar"> -->
      <div class="container-fluid" id="menu">
        <button class="btn btn-dark" type="button" id="modalCollapse">
          <span>&#9776; Menu</span>
        </button>
      </div>
      <!-- </nav> -->
      <div id="globeViz" class="col"></div>
    </div>
  </div>

  <script type="text/javascript">
    $(document).ready(function () {
      $("#menuModal").modal({
        backdrop: false,
        keyboard: false,
        focus: false,
      });

      $('.alert').hide();

      $('#paramForm :input').on('input', function(e){
        search();
     });

      $("#modalCollapse").on("click", function () {
        $("#menuModal").modal("toggle");
      });

    });

  </script>

  <script src="/js/test_fireball.js"></script>
  <%- include('partials/footer.ejs') %>